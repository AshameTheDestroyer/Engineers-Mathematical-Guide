import{z as x,u as E,j as e,L as i,w as b,R as w,B as f,v as y,_ as L,k as P,$ as R,W as T}from"./index-nnsqk7fk.js";import{u as q,F as v,H as I}from"./HTTPManager-vBHqpE8A.js";import{I as M}from"./Input-Bwd0SF-1.js";import{R as j}from"./RichText-fayepGf1.js";import{P as F,S as N,u as _}from"./StateButton-C1osDkCU.js";import"./ButtonBox-C60GYIw0.js";import"./index-9FXjUqj-.js";import"./check-CUtO5-iS.js";import"./network_error-BFEUb7Sm.js";const S=x.object({email:x.string({required_error:"required"}).email("pattern"),password:x.string({required_error:"required"}).min(8,"minimum").max(20,"maximum")}),k={en:"Enter your information",ar:"أدخلْ مَعلوماتِك"},G={email:{label:{en:"Email",ar:"البَريدُ الإلكترونيّ"},placeholder:{en:"example@gmail.com",ar:"أدخلْ بَريدكَ الإلكترونيّ"},errors:{required:{en:"Email is required.",ar:"البَريدُ الإلكترونيُّ إلزاميّ."},pattern:{en:"Email should be written as 'example@gmail.com'.",ar:"يَجبُ على البَريدِ الإلكترونيّ أنْ يُكتَبَ كالتّالي 'example@gmail.com'."}}},password:{label:{en:"Password",ar:"كلمةُ المُرور"},placeholder:{en:"Enter new password",ar:"أدخلْ كلمةَ مُرورٍ جديدةٍ"},errors:{required:{en:"Password is required.",ar:"كَلمةُ المُرورِ إلزاميّة."},minimum:{en:"Password should consist of more than 8 characters.",ar:"يَجبُ على كَلمةِ المُرورِ أنْ تَتألّفَ مِن أكثرِ مِن 8 حُروف."},maximum:{en:"Password should not exceed 20 characters.",ar:"يَجبُ على كَلمةِ المُرورِ ألّا تَتعدّى 20 حَرفاً."}}}},O={login:{en:"Login",ar:"تَسجيلُ الدّخول"},clear:{en:"Clear",ar:"مسحُ المَكتوب"}},r={title:k,inputs:G,"forgot-password":{en:"Forgot your password? **Reset Password**.",ar:"نَسيتَ كَلمةَ مُرورك؟ **أعدْ ضَبطَ كَلمةِ المُرور**."},buttons:O,"last-option":{en:"Don't have an account? **Sign up**.",ar:"لَيسَ لَديكَ حِساب؟ **أنشئْ حِساباً**."}},U=({SubmitData:a,mutationProps:n})=>{var m,d;const{GetLocale:s,GetErrorLocale:l,language:t}=E(),{reset:p,register:c,handleSubmit:h,formState:{errors:u}}=q(S);return e.jsxs(v,{onSubmit:h(a),title:e.jsx(i,{variant:"h1",className:"text-xl font-bold",children:r.title}),options:e.jsx(j,{variant:"p",ExtractedTextRenders:o=>e.jsx(b,{className:"text-secondary-normal underline",to:w.base.routes["forgot-password"].absolute,children:o}),children:s(r["forgot-password"],t)}),buttons:e.jsxs(e.Fragment,{children:[e.jsx(f,{type:"reset",onClick:o=>p(),children:e.jsx(i,{children:r.buttons.clear})}),e.jsx(N,{type:"submit",variant:"primary",...n,children:e.jsx(i,{children:r.buttons.login})})]}),lastOptions:e.jsx(j,{variant:"p",ExtractedTextRenders:o=>e.jsx(b,{className:"text-primary-normal underline",to:w.base.routes.signup.absolute,children:o}),children:s(r["last-option"],t)}),children:[e.jsx(M,{required:!0,autoFocus:!0,type:"email",...c("email"),label:e.jsx(i,{children:r.inputs.email.label}),errorMessage:l((m=u.email)==null?void 0:m.message,r.inputs.email.errors,t),placeholder:s(r.inputs.email.placeholder,t)}),e.jsx(F,{required:!0,...c("password"),label:e.jsx(i,{children:r.inputs.password.label}),errorMessage:l((d=u.password)==null?void 0:d.message,r.inputs.password.errors,t),placeholder:s(r.inputs.password.placeholder,t)})]})},B="login",D=(a,n)=>_({...a,mutationKey:[B,...(a==null?void 0:a.mutationKey)??[]],mutationFn:s=>I.post("/auth/login",s)},n),Q=()=>{const a=y(),{data:n}=L(),{setMyUser:s}=P(),{reset:l,isPending:t,isError:p,isSuccess:c,mutateAsync:h}=D({onSuccess:()=>s(n)});function u(m){const{data:d,success:o}=S.safeParse(m);o&&h(d).then(g=>g.data.accessToken).then(g=>R.Instance.SetItem("token",g)).then(()=>a(T.base.routes.home.absolute)).catch(console.error)}return e.jsx(U,{SubmitData:u,mutationProps:{reset:l,isPending:t,isError:p,isSuccess:c}})};export{Q as LoginPage};
