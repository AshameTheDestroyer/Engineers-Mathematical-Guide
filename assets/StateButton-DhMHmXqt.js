var O=r=>{throw TypeError(r)};var S=(r,t,s)=>t.has(r)||O("Cannot "+s);var o=(r,t,s)=>(S(r,t,"read from private field"),s?s.call(r):t.get(r)),x=(r,t,s)=>t.has(r)?O("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(r):t.set(r,s),y=(r,t,s,e)=>(S(r,t,"write to private field"),e?e.call(r,s):t.set(r,s),s),C=(r,t,s)=>(S(r,t,"access private method"),s);import{a5 as B,a6 as I,a7 as E,a8 as R,a9 as _,aa as K,r as d,ab as L,ac as q,u as A,j as p,t as D,b as N,q as k,B as U,i as z}from"./index-BRPsueAE.js";import{r as T}from"./index-C6oPIWXz.js";import{I as F}from"./Input-DBLj4j94.js";import{c as J}from"./check-CUtO5-iS.js";import{n as Q}from"./network_error-BFEUb7Sm.js";var g,f,i,l,m,M,j,P,$=(P=class extends B{constructor(t,s){super();x(this,m);x(this,g);x(this,f);x(this,i);x(this,l);y(this,g,t),this.setOptions(s),this.bindMethods(),C(this,m,M).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var e;const s=this.options;this.options=o(this,g).defaultMutationOptions(t),I(this.options,s)||o(this,g).getMutationCache().notify({type:"observerOptionsUpdated",mutation:o(this,i),observer:this}),s!=null&&s.mutationKey&&this.options.mutationKey&&E(s.mutationKey)!==E(this.options.mutationKey)?this.reset():((e=o(this,i))==null?void 0:e.state.status)==="pending"&&o(this,i).setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(t=o(this,i))==null||t.removeObserver(this)}onMutationUpdate(t){C(this,m,M).call(this),C(this,m,j).call(this,t)}getCurrentResult(){return o(this,f)}reset(){var t;(t=o(this,i))==null||t.removeObserver(this),y(this,i,void 0),C(this,m,M).call(this),C(this,m,j).call(this)}mutate(t,s){var e;return y(this,l,s),(e=o(this,i))==null||e.removeObserver(this),y(this,i,o(this,g).getMutationCache().build(o(this,g),this.options)),o(this,i).addObserver(this),o(this,i).execute(t)}},g=new WeakMap,f=new WeakMap,i=new WeakMap,l=new WeakMap,m=new WeakSet,M=function(){var s;const t=((s=o(this,i))==null?void 0:s.state)??R();y(this,f,{...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset})},j=function(t){_.batch(()=>{var s,e,n,c,a,b,w,v;if(o(this,l)&&this.hasListeners()){const u=o(this,f).variables,h=o(this,f).context;(t==null?void 0:t.type)==="success"?((e=(s=o(this,l)).onSuccess)==null||e.call(s,t.data,u,h),(c=(n=o(this,l)).onSettled)==null||c.call(n,t.data,null,u,h)):(t==null?void 0:t.type)==="error"&&((b=(a=o(this,l)).onError)==null||b.call(a,t.error,u,h),(v=(w=o(this,l)).onSettled)==null||v.call(w,void 0,t.error,u,h))}this.listeners.forEach(u=>{u(o(this,f))})})},P);function st(r,t){const s=K(t),[e]=d.useState(()=>new $(s,r));d.useEffect(()=>{e.setOptions(r)},[e,r]);const n=d.useSyncExternalStore(d.useCallback(a=>e.subscribe(_.batchCalls(a)),[e]),()=>e.getCurrentResult(),()=>e.getCurrentResult()),c=d.useCallback((a,b)=>{e.mutate(a,b).catch(L)},[e]);if(n.error&&q(e.options.throwOnError,[n.error]))throw n.error;return{...n,mutate:c,mutateAsync:n.mutate}}const G="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='32'%20height='32'%20viewBox='0%200%2024%2024'%3e%3cg%20fill='none'%20stroke='currentColor'%20stroke-linecap='round'%20stroke-linejoin='round'%20stroke-width='2'%3e%3cpath%20d='M21.257%2010.962c.474.62.474%201.457%200%202.076C19.764%2014.987%2016.182%2019%2012%2019s-7.764-4.013-9.257-5.962a1.69%201.69%200%200%201%200-2.076C4.236%209.013%207.818%205%2012%205s7.764%204.013%209.257%205.962'%20/%3e%3ccircle%20cx='12'%20cy='12'%20r='3'%20/%3e%3c/g%3e%3c/svg%3e",H="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='32'%20height='32'%20viewBox='0%200%2024%2024'%3e%3cg%20fill='none'%20stroke='currentColor'%20stroke-linecap='round'%20stroke-linejoin='round'%20stroke-width='2'%3e%3cpath%20d='M6.873%2017.129c-1.845-1.31-3.305-3.014-4.13-4.09a1.69%201.69%200%200%201%200-2.077C4.236%209.013%207.818%205%2012%205c1.876%200%203.63.807%205.13%201.874'%20/%3e%3cpath%20d='M14.13%209.887a3%203%200%201%200-4.243%204.242M4%2020L20%204M10%2018.704A7.1%207.1%200%200%200%2012%2019c4.182%200%207.764-4.013%209.257-5.962a1.694%201.694%200%200%200-.001-2.078A23%2023%200%200%200%2019.57%209'%20/%3e%3c/g%3e%3c/svg%3e",et=({id:r,ref:t,name:s,className:e,...n})=>{const{direction:c}=A(),[a,b]=d.useState(!1),[w,v]=d.useState();return d.useEffect(()=>{var h;const u=(h=document.querySelector(`#input-${s}`))==null?void 0:h.parentElement;u!=null&&v(u)},[]),p.jsxs(p.Fragment,{children:[p.jsx(F,{id:r,ref:t,className:D(c=="ltr"?"[&>input]:pr-12":"[&>input]:pl-12","[&>label]:max-w-[calc(100%-var(--spacing)*14)]",e),name:s,type:a?"text":"password",...n}),w!=null&&T.createPortal(p.jsx("button",{className:N(c=="ltr"?"right-4":"left-4","top-5.5 absolute -translate-y-1/2 cursor-pointer"),type:"button",onClick:u=>b(h=>!h),children:p.jsx(k,{width:24,height:24,source:a?H:G})}),w)]})},rt=({id:r,ref:t,reset:s,isError:e,children:n,isPending:c,isSuccess:a,className:b,disabled:w,errorThreshold:v=1e3,...u})=>{const h=[w,c,e,a].some(Boolean);return d.useEffect(()=>{e&&setTimeout(s,v)},[e]),p.jsx(U,{id:r,ref:t,className:b,disabled:h,...u,children:e?p.jsx(k,{source:Q,width:24,height:24}):c?p.jsx(z,{size:24,className:"scale-85 [&>*]:[animation-duration:3s]"}):a?p.jsx(k,{source:J,width:24,height:24,stroke:"currentColor"}):n})};export{et as P,rt as S,st as u};
