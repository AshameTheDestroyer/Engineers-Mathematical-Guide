import{r,j as o,t as y,b as g,q as M}from"./index-BRPsueAE.js";import{n as N}from"./network_error-BFEUb7Sm.js";const T=({id:v,ref:b,sizes:x,source:a,sourceSet:E,className:h,alternative:c,hideNotFoundIcon:j,doesFadeIn:w=!0,placeholder:d="$skeleton",...n})=>{const u=r.useRef(null),[f,I]=r.useState(!1),[t,i]=r.useState("pending"),m=t=="pending"&&d;return r.useEffect(()=>{const e=u.current;if(e!=null){if("loading"in HTMLImageElement)e.addEventListener("load",()=>i("success")),e.addEventListener("error",()=>i("error"));else{const s=new IntersectionObserver(l=>{l.forEach(L=>{L.isIntersecting&&(I(!0),s.unobserve(e))})},{rootMargin:"0px 0px 200px 0px"});return s.observe(e),()=>s.unobserve(e)}return()=>{var s,l;(s=e.removeEventListener)==null||s.call(e,"load",()=>{}),(l=e.removeEventListener)==null||l.call(e,"error",()=>{})}}},[a]),r.useEffect(()=>{t=="success"&&setTimeout(()=>{const e=u.current;e!=null&&(e.style.opacity="1")},10)},[t]),o.jsxs("div",{id:v,ref:b,className:y("relative h-auto w-full overflow-hidden",h),children:[m&&o.jsx("div",{"aria-hidden":!0,className:g("absolute inset-0 animate-pulse bg-black/15",d=="$skeleton"?"rounded-md":"")}),(t=="error"||a==null)&&!j&&o.jsx(M,{source:N,className:"-translate-1/2 absolute left-1/2 top-1/2 h-1/3 w-1/3 [&>svg]:h-full [&>svg]:w-full"}),o.jsx("img",{ref:u,className:g(t=="error"||a==null?"sr-only":"",w&&t=="success"?"fade-in opacity-0 transition-opacity duration-300 ease-in":""),src:a,loading:"lazy",decoding:"async",alt:c,srcSet:f||"loading"in HTMLImageElement?Object.entries(E??{}).map(([e,s])=>`${s} ${e}`).join(","):void 0,sizes:f||"loading"in HTMLImageElement?x:void 0,...n,onLoad:e=>{var s;return(s=n.onLoad)==null||s.call(n,e),i("success")},onError:e=>{var s;return(s=n.onError)==null||s.call(n,e),i("error")}}),c!=null&&!m&&o.jsx("span",{className:"sr-only",children:c})]})};export{T as I};
