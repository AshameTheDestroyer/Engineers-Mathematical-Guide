import{s as V,l as k,j as i,F as w,t as M,I as _,D as I,b as L,d as B,o as N,k as $,u as z,r as j,q as C}from"./index-QL9QGgjq.js";import{a as G,b as O}from"./LessonSchema-BBPjeQB-.js";import{u as D}from"./useElementInformation-McnBfEgz.js";import{m as K,M as F,u as Z}from"./useGetEnrollmentByID-CUtYx9aA.js";import{J as Y}from"./JumpToStartButton-FSe688ZF.js";import{S as E}from"./SearchResultDisplay-DdD0zzfR.js";import{a as J}from"./arrow-CEXDshSc.js";import{l as y}from"./modules_page-B4EyZNEX.js";const R="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='32'%20height='32'%20viewBox='0%200%2024%2024'%3e%3cpath%20fill='currentColor'%20d='m10.275%2016l5.575-3.575q.225-.15.225-.425t-.225-.425L10.275%208q-.25-.175-.513-.025t-.262.45v7.15q0%20.3.263.45t.512-.025M4%2020q-.825%200-1.412-.587T2%2018V6q0-.825.588-1.412T4%204h16q.825%200%201.413.588T22%206v12q0%20.825-.587%201.413T20%2020z'%20/%3e%3c/svg%3e",H="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='32'%20height='32'%20viewBox='0%200%2024%2024'%3e%3cpath%20fill='currentColor'%20d='M13%2017.05q1.1-.525%202.213-.788T17.5%2016q.9%200%201.763.15T21%2016.6V6.7q-.825-.35-1.713-.525T17.5%206q-1.175%200-2.325.3T13%207.2zm-1%202.425q-.35%200-.663-.088t-.587-.237q-.975-.575-2.05-.862T6.5%2018q-1.05%200-2.062.275T2.5%2019.05q-.525.275-1.012-.025T1%2018.15V6.1q0-.275.138-.525T1.55%205.2q1.175-.575%202.413-.888T6.5%204q1.45%200%202.838.375T12%205.5q1.275-.75%202.663-1.125T17.5%204q1.3%200%202.538.313t2.412.887q.275.125.413.375T23%206.1v12.05q0%20.575-.487.875t-1.013.025q-.925-.5-1.937-.775T17.5%2018q-1.125%200-2.2.288t-2.05.862q-.275.15-.587.238t-.663.087m2-10.7q0-.225.163-.462T14.525%208q.725-.25%201.45-.375T17.5%207.5q.5%200%20.988.063t.962.162q.225.05.388.25t.162.45q0%20.425-.275.625t-.7.1q-.35-.075-.737-.112T17.5%209q-.65%200-1.275.125t-1.2.325q-.45.175-.737-.025T14%208.775m0%205.5q0-.225.163-.462t.362-.313q.725-.25%201.45-.375T17.5%2013q.5%200%20.988.063t.962.162q.225.05.388.25t.162.45q0%20.425-.275.625t-.7.1q-.35-.075-.737-.112T17.5%2014.5q-.65%200-1.275.113t-1.2.312q-.45.175-.737-.012T14%2014.275m0-2.75q0-.225.163-.462t.362-.313q.725-.25%201.45-.375t1.525-.125q.5%200%20.988.063t.962.162q.225.05.388.25t.162.45q0%20.425-.275.625t-.7.1q-.35-.075-.737-.112t-.788-.038q-.65%200-1.275.125t-1.2.325q-.45.175-.737-.025t-.288-.65'%20/%3e%3c/svg%3e",P="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='32'%20height='32'%20viewBox='0%200%2024%2024'%3e%3cg%20fill='currentColor'%20fill-rule='evenodd'%20clip-rule='evenodd'%3e%3cpath%20d='M8%207V2.221a2%202%200%200%200-.5.365L3.586%206.5a2%202%200%200%200-.365.5zm2%200V2h7a2%202%200%200%201%202%202v.126a5.09%205.09%200%200%200-4.74%201.368v.001l-6.642%206.642a3%203%200%200%200-.82%201.532l-.74%203.692a3%203%200%200%200%203.53%203.53l3.694-.738a3%203%200%200%200%201.532-.82L19%2015.149V20a2%202%200%200%201-2%202H5a2%202%200%200%201-2-2V9h5a2%202%200%200%200%202-2'%20/%3e%3cpath%20d='M17.447%208.08a1.09%201.09%200%200%201%201.187.238l.002.001a1.09%201.09%200%200%201%200%201.539l-.377.377l-1.54-1.542l.373-.374l.002-.001q.152-.154.353-.237Zm-2.143%202.027l-4.644%204.644l-.385%201.924l1.925-.385l4.644-4.642l-1.54-1.54Zm2.56-4.11a3.1%203.1%200%200%200-2.187.909l-6.645%206.645a1%201%200%200%200-.274.51l-.739%203.693a1%201%200%200%200%201.177%201.176l3.693-.738a1%201%200%200%200%20.51-.274l6.65-6.646a3.088%203.088%200%200%200-2.185-5.275'%20/%3e%3c/g%3e%3c/svg%3e",Q=({id:l,ref:c,lesson:t,className:r,enrollment:e,RendersArrow:s,orientation:d,...u})=>{const{orientation:g}=V(),a=d??g,{courseID:h,moduleID:n}=k();return i.jsxs(w,{id:l,ref:c,className:M("gap-4 sm:gap-8",r),direction:a=="landscape"?"row":"column",placeItems:a=="landscape"?"baseline":"center",...u,children:[i.jsxs(w,{gap:"8",direction:"column",placeItems:"center",placeContent:"center",children:[i.jsx(_,{className:"max-w-28 sm:active:[&>[data-content]]:translate-y-2.5 sm:[&>[data-thickness]]:translate-y-1",thickness:"thick",disabled:e=="unenrolled",link:I.base.routes.lessonID.MapVariables({courseID:h,moduleID:n,lessonID:t.id.replace(/^[^]*-/,"")}),icon:{className:"sm:w-[64px] sm:h-[64px] w-[40px] h-[40px] [&>svg]:w-full [&>svg]:h-full",source:{video:R,reading:H,examination:P}[t.type]},variant:{passed:"success",unenrolled:"default",enrolled:"secondary"}[e]}),i.jsx(w,{className:L("border-3 bg-tertiary-light border-tertiary-light-active max-w-40 rounded-2xl p-2 sm:max-w-64 sm:p-4",e=="passed"&&"bg-vibrant-green-normal border-vibrant-green-dark",e=="enrolled"&&"bg-secondary-normal border-secondary-dark"),children:i.jsxs(B,{className:"text-center font-bold sm:text-lg",variant:"h3",children:[t.id.match(/\d*$/),". ",t.title]})})]}),s==null?void 0:s(e)]})},U="get-lessons",W=(l,c,t,r)=>N({schema:O,enabled:l!=null&&c!=null,queryFn:()=>(l!=null?G[l]??[]:[]).filter(e=>e.id.startsWith(l.split("-").map(s=>s[0]).join("")+"-"+c)),parseFn:(e,s)=>(e==null?void 0:e.map(d=>s.parse(d)))??[],...t,queryKey:[U,l,c,...(t==null?void 0:t.queryKey)??[]]},r),X="get-module-by-id",A=(l,c,t,r)=>N({schema:F,queryFn:()=>K.find(e=>e.id==l.split("-").map(s=>s[0]).join("")+"-"+c),...t,queryKey:[X,l,c,...(t==null?void 0:t.queryKey)??[]]},r);function e2({seed:l,length:c,gap:t=5,minima:r=0,maxima:e=100,threshold:s=.35,startAtCenter:d=!1}){let u=l;const g=()=>(u=(u*9301+49297)%233280,u/233280),a=[],h=d?(r+(e-r))/2:r+g()*(e-r);let n=Math.round(h),o=g()<.5;a.push(n);for(let p=1;p<c;p++)n<=r?o=!0:n>=e?o=!1:g()<s&&(o=!o),n=o?n+t:n-t,n=Math.max(r,Math.min(e,n)),a.push(n);return a}const i2=({id:l,ref:c,className:t,orientation:r})=>{const{myUser:e}=$(),{direction:s,language:d,GetLocale:u}=z(),{orientation:g}=V(),a=r??g,h=j.useRef(null);j.useImperativeHandle(c,()=>h.current);const n=D(h),{courseID:o,moduleID:p}=k(),{data:x}=A(o,p,{usesSuspense:!0}),{data:v}=W(o,p,{usesSuspense:!0}),{data:f}=Z(o,e==null?void 0:e.username,{usesSuspense:!0,enabled:o!=null&&e!=null}),T=f==null?void 0:f.progress.find(b=>b.module==(x==null?void 0:x.id)),q=j.useMemo(()=>o!=null&&p!=null?e2({gap:20,startAtCenter:!0,seed:p.hash(),length:v.length}):[],[o,p]);return o==null||p==null||x==null?i.jsx(E,{className:"grow",iconType:"empty",title:u(y.display.empty.title,d),paragraph:u(y.display.empty.paragraph,d).replace(/\*\*([^\*]+)\*\*/,`**"${o}"**`)}):v.length==0?i.jsx(E,{className:"grow",iconType:"empty",title:u(y.lessons.empty.title,d),paragraph:u(y.lessons.empty.paragraph,d).replace(/\*\*([^\*]+)\*\*/,`**"${p}"**`)}):i.jsxs(w,{id:l,ref:h,className:M("relative grow",a=="landscape"?"overflow-x-auto overflow-y-hidden p-[calc(var(--spacing-page)*2)]":"p-page",t),gap:a=="landscape"?"8":"4",direction:a=="landscape"?"row":"column",placeItems:s=="ltr"||a=="landscape"?"start":"end",children:[v.map((b,m)=>i.jsx(Q,{lesson:b,orientation:a,enrollment:f==null||T==null?"unenrolled":m<T["finished-lessons"]?"passed":m>T["finished-lessons"]?"unenrolled":"enrolled",style:{transform:a=="landscape"?`translateY(calc((${n.height}px - var(--spacing-page) * 4 - 100%) * ${q[m]/100}))`:`translateX(calc((${n.width}px - var(--spacing-page) * 2 - 100%) * ${q[m]/100}))`},RendersArrow:S=>m<v.length-1&&i.jsx("div",{className:M("text-tertiary-light stroke-tertiary-light-active h-[32px] w-[32px] sm:h-[48px] sm:w-[48px] [&>svg]:h-full [&>svg]:w-full",S=="passed"&&"text-vibrant-green-normal stroke-vibrant-green-dark",S=="enrolled"&&"text-secondary-normal stroke-secondary-dark",S=="unenrolled"?"grayscale-25 saturate-75 contrast-85":"animate-bounce"),children:i.jsx(C,{thickness:1.5,source:J,style:{transform:a=="portrait"?`rotate(${q[m+1]>q[m]?"145":"215"}deg)`:`rotate(${q[m+1]>q[m]?s=="ltr"?"135":"225":s=="ltr"?"45":"315"}deg)`}})})},m)),(r!=null||a=="landscape")&&i.jsx(Y,{className:L((s=="ltr"||s=="rtl"&&a=="landscape")&&"place-self-end",a=="portrait"?"left-auto! right-auto! bottom-0!":"left-0! right-0! bottom-auto!",a=="landscape"&&(s=="ltr"?"translate-page":"-translate-x-page translate-y-page")),isContainerized:!0,orientation:a=="portrait"?"vertical":"horizontal"})]})};export{i2 as L,A as u};
