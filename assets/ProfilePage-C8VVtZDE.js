import{u as q,s as _,c as I,j as t,F as n,d as b,b as h,r as f,k as R,J as M,q as L,f as D,B as j,L as w,v as E,n as F,D as H,t as P,m as U,l as A,K,R as B}from"./index-DNwHBppe.js";import{u as O}from"./useScrollRestoration-B02ZIp-x.js";import{P as V}from"./ProfileAvatar-C5_ww5z8.js";import{I as Q}from"./Image-iq2M_NKL.js";import{B as J}from"./ButtonBox-DWJE82HV.js";import{a as W}from"./DropDownList-BmUoy_0e.js";import{s as Y}from"./star-B-UdhycM.js";import{l as r,D as X,G as Z}from"./DayStreakBadge-D3k1z9L8.js";import{S as y}from"./Separator-BvQIrVzx.js";import{s as z}from"./user-BgdDnp0D.js";import{R as e2}from"./RelatedUsersDisplay-D167tJm3.js";import{u as $}from"./useGetUsersByIDs-DZAaTEHS.js";import{u as t2}from"./useElementInformation-ByzT6j6u.js";import{u as C}from"./useGetCoursesByIDs-BGSWlIIt.js";import{R as a2}from"./RelatedCoursesDisplay-CTjxNVnG.js";import{S}from"./SearchResultDisplay-QL6_W1If.js";import{l as o2}from"./login-CMravD2g.js";import"./network_error-BFEUb7Sm.js";import"./useShadow-Di_ovkcA.js";import"./CourseSchema-b2jpAZrW.js";import"./courses.dummy-zCi7JDTP.js";import"./CoursesDisplay-BIRjTbG-.js";import"./CardSummary-CZwssmAi.js";import"./Rating-BN8P6HtX.js";import"./courses_page-CmId8-xS.js";import"./RichText--LUasi-H.js";const r2=({user:e,profilePictureRect:o})=>{const{direction:a}=q(),{isScreenSize:s}=_(),{CopyToClipboard:m}=I();return t.jsxs(n,{className:"overflow-hidden md:mt-4",gap:"4",direction:"column",style:{marginTop:s["max-sm"]?`calc(${o.height/2}px - 3rem)`:s["max-md"]?`${o.height/2}px`:"0",marginRight:s.md&&a=="rtl"?`calc(${o.width}px + 8rem)`:"0",marginLeft:s.md&&a=="ltr"?`calc(${o.left+o.width}px + 1rem)`:"0"},children:[t.jsxs(n,{className:"max-md:place-content-center",alignItems:"center",gap:"4",children:[t.jsxs(b,{className:h(a=="rtl"?"text-end":"","overflow-hidden overflow-ellipsis whitespace-nowrap text-nowrap text-2xl font-bold max-md:text-xl"),dir:"ltr",variant:"h1",children:[e.name," ",e.surname]}),t.jsx("img",{className:"h-[48px] translate-y-0 drop-shadow-[3px_3px_1px_#0000004c]",src:`flags/${e.flag}.svg`,width:48,height:48})]}),t.jsxs(b,{className:h(a=="rtl"?"text-end":"","text-primary-normal w-fit cursor-pointer overflow-hidden overflow-ellipsis whitespace-nowrap text-nowrap text-xl font-bold max-md:place-self-center max-md:text-lg"),dir:"ltr",variant:"h2",onClick:l=>m(`@${e.username}`),children:["@",e.username]})]})},s2="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='32'%20height='32'%20viewBox='0%200%2024%2024'%3e%3cpath%20fill='currentColor'%20d='M18%2011h-2q-.425%200-.712-.288T15%2010t.288-.712T16%209h2V7q0-.425.288-.712T19%206t.713.288T20%207v2h2q.425%200%20.713.288T23%2010t-.288.713T22%2011h-2v2q0%20.425-.288.713T19%2014t-.712-.288T18%2013zm-9%201q-1.65%200-2.825-1.175T5%208t1.175-2.825T9%204t2.825%201.175T13%208t-1.175%202.825T9%2012m-8%206v-.8q0-.85.438-1.562T2.6%2014.55q1.55-.775%203.15-1.162T9%2013t3.25.388t3.15%201.162q.725.375%201.163%201.088T17%2017.2v.8q0%20.825-.587%201.413T15%2020H3q-.825%200-1.412-.587T1%2018'%20/%3e%3c/svg%3e",l2="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='32'%20height='32'%20viewBox='0%200%2024%2024'%3e%3cpath%20fill='currentColor'%20d='M17%209h4q.425%200%20.713.288T22%2010t-.288.713T21%2011h-4q-.425%200-.712-.288T16%2010t.288-.712T17%209m-8%203q-1.65%200-2.825-1.175T5%208t1.175-2.825T9%204t2.825%201.175T13%208t-1.175%202.825T9%2012m-8%206v-.8q0-.85.438-1.562T2.6%2014.55q1.55-.775%203.15-1.162T9%2013t3.25.388t3.15%201.162q.725.375%201.163%201.088T17%2017.2v.8q0%20.825-.587%201.413T15%2020H3q-.825%200-1.412-.587T1%2018'%20/%3e%3c/svg%3e",n2="/Engineers-Mathematical-Guide/assets/default_banner-ss2iB1n_.jpg",i2=({user:e,profilePictureRef:o})=>{const{direction:a}=q(),{isScreenSize:s}=_(),m=f.useRef(null);f.useImperativeHandle(o,()=>m.current);const{myUser:l}=R(),d=l==null?void 0:l.followers.includes(e.username),p=f.useMemo(()=>((e==null?void 0:e.username.hash())??0)%360,[e==null?void 0:e.username]),u=()=>(l==null?void 0:l.username)==e.username?t.jsx(j,{thickness:"thick",variant:"primary",onClick:x=>x.stopPropagation(),children:t.jsx(w,{children:r.buttons["edit-profile"]})}):l!=null&&t.jsx(j,{thickness:"thick",onClick:x=>x.stopPropagation(),variant:d?"error":"success",icon:{placement:"left",source:d?l2:s2},children:t.jsx(w,{children:d?r.buttons.unfollow:r.buttons.follow})});return t.jsxs("figure",{className:"border-background-dark -m-page relative mb-auto border-b-2 text-white",children:[t.jsx(n,{ref:m,className:h("absolute bottom-0 z-[1] aspect-square h-[80%] w-min translate-y-1/2 max-md:-translate-x-1/2",a=="ltr"?"max-md:left-1/2 md:left-[6vw]":"max-md:left-1/2 md:right-[6vw]"),children:t.jsxs(V,{className:"h-full w-full max-sm:[&>div>div>div>img]:scale-75 [&>div]:h-full [&>div]:w-full",user:e,children:[e.role==M.admin&&t.jsx(L,{className:"text-vibrant-yellow-normal stroke-vibrant-yellow-dark absolute bottom-4 left-1/2 -translate-x-1/2 md:[&>svg]:h-[48px] md:[&>svg]:w-[48px]",thickness:2,source:Y}),t.jsx(W,{className:h("max-sm:[&>div:first-child]:p-2! absolute bottom-[9%] max-sm:bottom-[19%] md:hidden",a=="ltr"?"right-[9%] max-sm:right-[19%]":"left-[9%] max-sm:left-[19%]"),variant:"primary",icon:{source:D},onClick:x=>x.stopPropagation(),thickness:s.sm?"normal":"thin",position:a=="ltr"?"bottom-end":"bottom-start",children:t.jsx(u,{})})]})}),t.jsx(J,{className:h("absolute bottom-0 z-[1] translate-y-1/2 place-items-center max-md:hidden",a=="ltr"?"right-[6vw]":"left-[6vw]"),children:t.jsx(u,{})}),t.jsx(Q,{className:"h-[60vh] [&>img]:h-full [&>img]:w-full [&>img]:object-cover",source:e.banner??n2,alternative:`Image of ${e.name}'s Background.`,style:{filter:e.banner==null?`hue-rotate(${p}deg)`:""}}),t.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent to-black/75 to-100%"})]})},c2="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='32'%20height='32'%20viewBox='0%200%2024%2024'%3e%3cpath%20fill='currentColor'%20d='M19.95%2021q-3.125%200-6.175-1.362t-5.55-3.863t-3.862-5.55T3%204.05q0-.45.3-.75t.75-.3H8.1q.35%200%20.625.238t.325.562l.65%203.5q.05.4-.025.675T9.4%208.45L6.975%2010.9q.5.925%201.187%201.787t1.513%201.663q.775.775%201.625%201.438T13.1%2017l2.35-2.35q.225-.225.588-.337t.712-.063l3.45.7q.35.1.575.363T21%2015.9v4.05q0%20.45-.3.75t-.75.3'%20/%3e%3c/svg%3e",m2="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='32'%20height='32'%20viewBox='0%200%2024%2024'%3e%3cpath%20fill='currentColor'%20d='M4%2020q-.825%200-1.412-.587T2%2018V6q0-.825.588-1.412T4%204h16q.825%200%201.413.588T22%206v12q0%20.825-.587%201.413T20%2020zm8-7.175q.125%200%20.263-.038t.262-.112L19.6%208.25q.2-.125.3-.312t.1-.413q0-.5-.425-.75T18.7%206.8L12%2011L5.3%206.8q-.45-.275-.875-.012T4%207.525q0%20.25.1.438t.3.287l7.075%204.425q.125.075.263.113t.262.037'%20/%3e%3c/svg%3e",d2="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='32'%20height='32'%20viewBox='0%200%2024%2024'%3e%3cpath%20fill='currentColor'%20d='M12%2022q-2.075%200-3.9-.788t-3.175-2.137T2.788%2015.9T2%2012t.788-3.9t2.137-3.175T8.1%202.788T12%202q3.8%200%206.588%202.45t3.312%206.1q-.5-.25-1.037-.387T19.75%2010q-.475-1.825-1.713-3.25T15%204.6V5q0%20.825-.587%201.413T13%207h-2v2q0%20.425-.288.713T10%2010H8v2h6q.275%200%20.513.138t.362.387q-.425.675-.65%201.425T14%2015.5q0%201.575.813%202.925t1.662%202.525q-1.025.5-2.15.775T12%2022m-1-2.05V18q-.825%200-1.412-.587T9%2016v-1l-4.8-4.8q-.075.45-.137.9T4%2012q0%203.025%201.988%205.3T11%2019.95M19.5%2022q-.175%200-.3-.1t-.175-.25q-.275-.875-.775-1.625t-1.075-1.475q-.525-.65-.85-1.425T16%2015.5q0-1.45%201.025-2.475T19.5%2012t2.475%201.025T23%2015.5q0%20.85-.337%201.613t-.838%201.437q-.575.725-1.075%201.475t-.775%201.625q-.05.15-.175.25t-.3.1m0-2.825q.25-.425.55-.787t.575-.738q.35-.475.613-1.012T21.5%2015.5q0-.825-.587-1.412T19.5%2013.5t-1.412.588T17.5%2015.5q0%20.6.263%201.138t.612%201.012l.588.738q.287.363.537.787m0-2.425q-.525%200-.888-.363t-.362-.887t.363-.888t.887-.362t.888.363t.362.887t-.363.888t-.887.362'%20/%3e%3c/svg%3e",p2="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='32'%20height='32'%20viewBox='0%200%2024%2024'%3e%3cpath%20fill='currentColor'%20d='m7%2022l4-7.5l-8-1L15%202h2l-4%207.5l8%201L9%2022z'%20/%3e%3c/svg%3e",g2="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='32'%20height='32'%20viewBox='0%200%2024%2024'%3e%3cpath%20fill='currentColor'%20d='M13.5%209a1%201%200%200%201%201-1H18a1%201%200%200%201%201%201v3.5a1%201%200%201%201-2%200v-1.086l-4.293%204.293a1%201%200%200%201-1.414%200L9%2013.414l-2.293%202.293a1%201%200%200%201-1.414-1.414l3-3a1%201%200%200%201%201.414%200L12%2013.586L15.586%2010H14.5a1%201%200%200%201-1-1'%20/%3e%3c/svg%3e",h2="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='32'%20height='32'%20viewBox='0%200%2024%2024'%3e%3cpath%20fill='currentColor'%20d='M10.514%206.49a4.5%204.5%200%200%201%202.973%200l7.6%202.66c.803.282.803%201.418%200%201.7l-7.6%202.66a4.5%204.5%200%200%201-2.973%200l-5.509-1.93a1.24%201.24%200%200%200-.436.597a1%201%200%200%201%20.013%201.635l.004.018l.875%203.939a.6.6%200%200%201-.585.73H3.125a.6.6%200%200%201-.586-.73l.875-3.94l.005-.017a1%201%200%200%201%20.132-1.707a2.35%202.35%200%200%201%20.413-.889l-1.05-.367c-.804-.282-.804-1.418%200-1.7z'%20/%3e%3cpath%20fill='currentColor'%20d='m6.393%2012.83l-.332%202.654c-.057.452.127.92.52%201.196c1.157.815%203.043%201.82%205.42%201.82a9%209%200%200%200%205.473-1.834c.365-.28.522-.727.47-1.152l-.336-2.685l-4.121%201.442a4.5%204.5%200%200%201-2.973%200z'%20/%3e%3c/svg%3e",x2=({user:e,profilePictureRect:o})=>{const a=E(),{isDarkThemed:s}=F(),{isScreenSize:m}=_(),{CopyToClipboard:l}=I(),{direction:d,language:p,GetGenderedLocale:u}=q(),x=Intl.NumberFormat(p=="ar"?"ar-UA":"en-US",{notation:"compact",compactDisplay:"short",maximumFractionDigits:1}).format(e.followers.length)+" "+u(r.information.followers,p,e.gender),k=Intl.NumberFormat(p=="ar"?"ar-UA":"en-US",{notation:"compact",compactDisplay:"short",maximumFractionDigits:1}).format(e.followees.length)+" "+u(r.information.followees,p,e.gender),T=Intl.NumberFormat(p=="ar"?"ar-UA":"en-US").format(e.xp)+" "+u(r.information.xp,p,e.gender),N=[...e.specialization==null?[]:[{className:"bg-primary-normal",icon:h2,text:e.specialization.toTitleCase("ai"),onClick:()=>a(H.base.routes.learningTrackID.MapVariable(e.specialization))}],{className:h(s?"bg-tertiary-light":"bg-tertiary-normal",d=="ltr"?"text-start":"text-end","[&>.typography]:[direction:ltr]"),icon:m2,text:e.email,onClick:()=>l(e.email)},{icon:d2,text:`${e.city} - ${e.country}`,onClick:()=>l(`${e.city} - ${e.country}`)},{className:d=="rtl"&&"[&>.typography]:[direction:ltr] [&>.typography]:text-end",icon:c2,text:e["phone-number"],onClick:()=>l(e["phone-number"])}];return t.jsxs(n,{className:"max-xl:md:mt-20",gap:"8",direction:"column",style:{marginRight:m.xl&&d=="rtl"?`calc(${o.width}px + 8rem)`:"0",marginLeft:m.xl&&d=="ltr"?`calc(${o.left+o.width}px + 1rem)`:"0"},children:[t.jsxs(n,{className:"max-md:flex-col max-md:place-content-center",gap:"4",children:[t.jsx(n,{className:"max-md:[&>:not(hr):not(:last-child)]:flex-0 gap-4 place-self-center max-md:-mx-8 max-md:place-content-center max-md:gap-1.5 max-sm:text-sm [&>:not(hr)]:h-12",children:[{className:"scale-150",text:x,icon:g2},{icon:z,text:k},{text:T,icon:p2}].map((g,v)=>t.jsxs(f.Fragment,{children:[v>0&&t.jsx(y,{className:s?"border-foreground-dark":"border-background-dark-hover",thickness:"thin",orientation:"vertical"}),t.jsxs(n,{gap:"2",placeItems:"center",children:[t.jsx(L,{className:h(s?"text-foreground-dark":"text-background-dark-hover","max-sm:[&>svg]:h-6 max-sm:[&>svg]:w-6",g.className),source:g.icon}),t.jsx(b,{className:"whitespace-nowrap",variant:"p",children:g.text})]})]},v))}),t.jsxs(n,{className:h("place-self-center",d=="ltr"?"md:ml-auto":"md:mr-auto"),gap:"4",wrap:"wrap-reverse",direction:"row-reverse",children:[t.jsx(X,{user:e}),t.jsx(Z,{gender:e.gender})]})]}),t.jsx("div",{className:"grid grid-cols-[repeat(auto-fill,minmax(18rem,1fr))] gap-4 max-md:grid-cols-2 max-sm:grid-cols-1 [&>div]:h-12",children:N.map((g,v)=>t.jsxs(n,{className:P(s?"bg-foreground-light":"bg-background-dark-active","cursor-pointer rounded-full p-2 px-5 pr-7 text-start font-bold text-white transition duration-200 [&:is(:hover,:focus-within)]:scale-105",g.className),gap:"3",variant:"button",alignItems:"center",onClick:g.onClick,children:[t.jsx(L,{source:g.icon}),t.jsx(b,{className:"grow overflow-hidden overflow-ellipsis whitespace-nowrap text-nowrap",variant:"p",children:g.text})]},v))}),t.jsxs(n,{className:h(s?"border-foreground-dark":"border-background-dark-hover","border-3 relative rounded-xl p-4"),children:[t.jsx(w,{className:h(s?"text-foreground-dark":"text-background-dark-active","bg-background-light absolute -top-3.5 px-3 font-bold"),variant:"legend",gender:e.gender,children:r.information.biography}),t.jsx(b,{className:"text-justify",variant:"p",dir:"ltr",children:e.biography})]})]})},u2="get-followers",f2=(e,o,a)=>$(e.followers,{queryKey:[u2,e.username]},a),w2="get-followees",v2=(e,o,a)=>$(e.followees,{queryKey:[w2,e.username]},a),b2=({user:e})=>{const{language:o,GetLocale:a,GetGenderedLocale:s}=q(),m=f.useRef(null),l=t2(m),d=f2(e),p=v2(e),u=C(e["finished-courses"],{queryKey:["get-finished-courses"]}),x=C(e["enrolled-courses"],{queryKey:["get-enrolled-courses"]}),k=C(e["bookmarked-courses"],{queryKey:["get-bookmarked-courses"]}),T=new Array(5).fill(null),N=[{query:d,locales:r["related-users"].followers},{query:p,locales:r["related-users"].followees}],g=[{query:u,locales:r["related-courses"].finished},{query:x,locales:r["related-courses"].enrolled},{query:k,locales:r["related-courses"].bookmarked}],v=i=>{const c=r["related-users-error"];return t.jsxs(n,{className:"lg:col-span-2",gap:"4",direction:"column",children:[t.jsx(w,{className:"text-lg font-bold",variant:"h2",gender:e.gender,children:i.locales.title}),t.jsx(e2,{...i.query,skeletonArray:T,errorDisplay:{title:a(c.title,o),button:a(c.button,o),paragraph:a(c.paragraph,o)},emptyDisplay:{title:a(i.locales.empty.title,o),paragraph:s(i.locales.empty.paragraph,o,e.gender).replace(/\*\*([^\*]+)\*\*/,`**"${e.name}"**`)}})]})},G=i=>{const c=r["related-courses-error"];return t.jsxs(n,{className:"lg:col-span-2",gap:"4",direction:"column",children:[t.jsx(w,{className:"text-lg font-bold",variant:"h2",gender:e.gender,children:i.locales.title}),t.jsx(a2,{...i.query,skeletonArray:T,errorDisplay:{title:a(c.title,o),button:a(c.button,o),paragraph:a(c.paragraph,o)},emptyDisplay:{title:a(i.locales.empty.title,o),paragraph:s(i.locales.empty.paragraph,o,e.gender).replace(/\*\*([^\*]+)\*\*/,`**"${e.name}"**`)}})]})};return t.jsxs(n,{variant:"main",direction:"column",gap:"8",children:[t.jsx(U,{children:`${e.name} ${e.surname}`}),t.jsx(i2,{user:e,profilePictureRef:m}),t.jsx(r2,{user:e,profilePictureRect:l}),t.jsx(x2,{user:e,profilePictureRect:l}),t.jsx(n,{className:"lg:col-span-2",direction:"column",gap:"4",children:N.map((i,c)=>t.jsxs(f.Fragment,{children:[c>0&&t.jsx(y,{className:"border-background-dark-hover",thickness:"thick",orientation:"horizontal"}),t.jsx(v,{...i})]},c))}),t.jsx(y,{className:"border-background-dark-hover",thickness:"thick",orientation:"horizontal"}),t.jsx(n,{className:"lg:col-span-2",direction:"column",gap:"4",children:g.map((i,c)=>t.jsxs(f.Fragment,{children:[c>0&&t.jsx(y,{className:"border-background-dark-hover",thickness:"thick",orientation:"horizontal"}),t.jsx(G,{...i})]},c))})]})},q2="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='32'%20height='32'%20viewBox='0%200%2024%2024'%3e%3cpath%20fill='currentColor'%20d='M19.5%2010.925L18.1%2012.3q-.275.275-.687.288T16.7%2012.3q-.275-.275-.275-.7t.275-.7l1.375-1.4L16.7%208.125q-.275-.275-.275-.687t.275-.713q.3-.3.713-.3t.712.3L19.5%208.1l1.375-1.4q.275-.3.687-.3t.713.3t.3.713t-.3.712L20.9%209.5l1.4%201.4q.3.3.287.7t-.312.7q-.3.275-.7.288t-.7-.288zM9%2012q-1.65%200-2.825-1.175T5%208t1.175-2.825T9%204t2.825%201.175T13%208t-1.175%202.825T9%2012m-8%206v-.8q0-.85.438-1.562T2.6%2014.55q1.55-.775%203.15-1.162T9%2013t3.25.388t3.15%201.162q.725.375%201.163%201.088T17%2017.2v.8q0%20.825-.587%201.413T15%2020H3q-.825%200-1.412-.587T1%2018'%20/%3e%3c/svg%3e",Q2=()=>{O();const{language:e,GetLocale:o}=q(),{profileID:a}=A(),{myUser:s}=R(),{data:m}=K(a,{usesSuspense:!0,enabled:a!=null}),l=a==null?s:m;return l!=null?t.jsx(b2,{user:l}):a!=null?t.jsx(S,{className:"grow",iconType:"empty",title:o(r.display.empty.title,e),paragraph:o(r.display.empty.paragraph,e).replace(/\*\*([^\*]+)\*\*/,`**"${a}"**`)}):t.jsx(S,{className:"grow",iconType:"custom",iconProps:{source:q2},title:o(r.display["logged-out"].title,e),paragraph:o(r.display["logged-out"].paragraph,e),buttons:t.jsxs(n,{gap:"4",children:[t.jsx(j,{link:B.base.routes.signup.absolute,icon:{placement:"left",source:z},children:t.jsx(w,{children:r.buttons.signup})}),t.jsx(j,{variant:"primary",link:B.base.routes.login.absolute,icon:{placement:"right",source:o2},children:t.jsx(w,{children:r.buttons.login})})]})})};export{Q2 as ProfilePage};
