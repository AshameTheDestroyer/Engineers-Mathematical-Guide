import{u as M,n as N,r as j,j as r,B as A,b as k,t as T,F as S}from"./index-BaPsShaQ.js";import{I as W}from"./Image-x-lwo8wW.js";import{S as v}from"./SearchResultDisplay-Cut35kQh.js";const h=({id:o,ref:i,data:t,refetch:d,isError:b,isLoading:w,className:n,keys:f,CellRenders:s,keysClassNames:u,setSearchQuery:$,prioritizedKeys:F,emptyTypography:_,errorTypography:z,loadingTypography:I})=>{const x="$i$",{direction:p}=M(),{isDarkThemed:E}=N(),g=j.useMemo(()=>[x].concat(f??Object.keys((t==null?void 0:t[0])??{})).prioritize([x].concat(F)??[]),[f,t]),m=({children:e,className:c})=>r.jsx(h.Wrapper,{id:o,ref:i,className:T(n,c),keys:g,children:e});return w||t==null?r.jsx(m,{className:"flex! place-content-center place-items-center",children:r.jsx(v,{iconType:"loading",...I})}):b?r.jsx(m,{className:"flex! place-content-center place-items-center",children:r.jsx(v,{iconType:"error",...z,buttons:r.jsx(A,{onClick:e=>d(),children:z.button})})}):t.length==0?r.jsx(m,{className:"flex! place-content-center place-items-center",children:r.jsx(v,{iconType:"empty",..._,buttons:r.jsx(A,{onClick:e=>$(""),children:_.button})})}):r.jsxs(m,{children:[g.map((e,c)=>r.jsx(h.Cell,{className:k("z-2 bg-background-darker sticky -top-4 font-bold text-white",c==0&&(p=="ltr"?"rounded-tl-[inherit]":"rounded-tr-[inherit]"),c==g.length-1&&(p=="ltr"?"rounded-tr-[inherit]":"rounded-tl-[inherit]"),u==null?void 0:u[e]),type:"heading",children:e==x?"":e.toTitleCase("id")},c)),t.map((e,c)=>g.map((l,a)=>r.jsx(h.Cell,{className:k(c==t.length-1&&a==0&&(p=="ltr"?"rounded-bl-[inherit]":"rounded-br-[inherit]"),c==t.length-1&&a==g.length-1&&(p=="ltr"?"rounded-br-[inherit]":"rounded-bl-[inherit]"),c%2!=0?E?"bg-background-light/75":"bg-background-dark/75":E&&"bg-background-dark/25",a==0&&"index bg-background-darker z-1 sticky font-bold text-white",a==0&&(p=="ltr"?"-left-4":"-right-4"),a==0&&c==t.length-1&&"last",u==null?void 0:u[l]),type:"cell",children:(s==null?void 0:s({key:l,value:e[l]},e))??(()=>{if(l==x)return c+1;switch(typeof e[l]){case"boolean":return e[l]?"True":"False";case"object":return Array.isArray(e[l])?e[l].join(", ")+".":JSON.stringify(e[l]);case"string":return[".png",".jpg",".wbp",".bmp",".jpeg",".tiff"].some(L=>e[l].endsWith(L))?r.jsxs(r.Fragment,{children:[r.jsx(W,{className:"-z-1 absolute inset-0 rounded-[inherit] [&>img]:h-full [&>img]:w-full [&>img]:object-cover",source:e[l],alternative:"Data image."}),r.jsx("div",{className:"min-h-[64px] min-w-[128px]"})]}):e[l];default:return e[l]}})()??"None"},`${c}-${a}`)))]})};h.Wrapper=({id:o,ref:i,keys:t,children:d,className:b})=>{const{isDarkThemed:w}=N(),n=j.useRef(null);j.useImperativeHandle(i,()=>n.current),j.useEffect(()=>{if(n.current!=null)return n.current.addEventListener("scroll",f),()=>{var s;(s=n.current)==null||s.removeEventListener("scroll",f)}},[]);function f(){n.current!=null&&(n.current.scrollTop>=48?n.current.setAttribute("data-scrolled-down","true"):n.current.removeAttribute("data-scrolled-down"),Math.abs(n.current.scrollLeft)>=64?n.current.setAttribute("data-scrolled-horizontally","true"):n.current.removeAttribute("data-scrolled-horizontally"))}return r.jsx("div",{id:o,ref:n,className:T("border-background-darker relative grid auto-rows-max overflow-auto rounded-2xl border-2 p-4 [&::-webkit-scrollbar]:hidden [&[data-scrolled-down=true]_.cell[role=heading]]:rounded-none [&[data-scrolled-horizontally=true]_.cell.index.last]:rounded-none",w?"bg-background-normal/50":"bg-background-dark/50",b),role:"table",style:{gridTemplateColumns:`3rem repeat(${t.length-1}, 1fr)`},children:d})};h.Cell=({id:o,ref:i,type:t,children:d,className:b})=>r.jsx(S,{id:o,ref:i,className:T("cell border-background-darker border-1 relative isolate text-nowrap px-4 py-2",b),role:t,children:d});function D(o){let i=[];return"shape"in o._def&&(i=[...Object.keys(o._def.shape())]),"left"in o._def&&(i=[...i,...D(o._def.left)]),"right"in o._def&&(i=[...i,...D(o._def.right)]),i}export{h as T,D as Z};
