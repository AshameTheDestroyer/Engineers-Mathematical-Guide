import{Q as Ae,S as me,V as ze,k as qe,n as Le,p as We,r as Me,j as x,t as Ve,E as $e,F as he,q as _e,L as J,B as ve,b as Ge,d as He}from"./index-Dj5WZ14J.js";import{r as Ze}from"./index-7BHnBKHE.js";import{M as Ue}from"./NavigationBar-CXsnePfu.js";import{u as Qe}from"./useNetworkStatus-Ku_vJB3w.js";import{B as Je}from"./ButtonBox-DdRcAhQf.js";import{u as Ke}from"./useGetLessonByID-DqR7DeKa.js";import{Q as xe}from"./LessonSchema-CnppMMUi.js";import{l as K}from"./modules_page-B4EyZNEX.js";var X={},N={},z={},pe={};(function T(M,I,C,k){var O=!!(M.Worker&&M.Blob&&M.Promise&&M.OffscreenCanvas&&M.OffscreenCanvasRenderingContext2D&&M.HTMLCanvasElement&&M.HTMLCanvasElement.prototype.transferControlToOffscreen&&M.URL&&M.URL.createObjectURL),f=typeof Path2D=="function"&&typeof DOMMatrix=="function",m=function(){if(!M.OffscreenCanvas)return!1;var r=new OffscreenCanvas(1,1),e=r.getContext("2d");e.fillRect(0,0,1,1);var n=r.transferToImageBitmap();try{e.createPattern(n,"no-repeat")}catch{return!1}return!0}();function y(){}function u(r){var e=I.exports.Promise,n=e!==void 0?e:M.Promise;return typeof n=="function"?new n(r):(r(y,y),null)}var l=function(r,e){return{transform:function(n){if(r)return n;if(e.has(n))return e.get(n);var s=new OffscreenCanvas(n.width,n.height),h=s.getContext("2d");return h.drawImage(n,0,0),e.set(n,s),s},clear:function(){e.clear()}}}(m,new Map),t=function(){var r=Math.floor(16.666666666666668),e,n,s={},h=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(e=function(v){var p=Math.random();return s[p]=requestAnimationFrame(function i(g){h===g||h+r-1<g?(h=g,delete s[p],v()):s[p]=requestAnimationFrame(i)}),p},n=function(v){s[v]&&cancelAnimationFrame(s[v])}):(e=function(v){return setTimeout(v,r)},n=function(v){return clearTimeout(v)}),{frame:e,cancel:n}}(),a=function(){var r,e,n={};function s(h){function v(p,i){h.postMessage({options:p||{},callback:i})}h.init=function(i){var g=i.transferControlToOffscreen();h.postMessage({canvas:g},[g])},h.fire=function(i,g,P){if(e)return v(i,null),e;var E=Math.random().toString(36).slice(2);return e=u(function(j){function S(F){F.data.callback===E&&(delete n[E],h.removeEventListener("message",S),e=null,l.clear(),P(),j())}h.addEventListener("message",S),v(i,E),n[E]=S.bind(null,{data:{callback:E}})}),e},h.reset=function(){h.postMessage({reset:!0});for(var i in n)n[i](),delete n[i]}}return function(){if(r)return r;if(!C&&O){var h=["var CONFETTI, SIZE = {}, module = {};","("+T.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{r=new Worker(URL.createObjectURL(new Blob([h])))}catch(v){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn("ðŸŽŠ Could not load worker",v),null}s(r)}return r}}(),o={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function c(r,e){return e?e(r):r}function d(r){return r!=null}function w(r,e,n){return c(r&&d(r[e])?r[e]:o[e],n)}function q(r){return r<0?0:Math.floor(r)}function L(r,e){return Math.floor(Math.random()*(e-r))+r}function B(r){return parseInt(r,16)}function _(r){return r.map(R)}function R(r){var e=String(r).replace(/[^0-9a-f]/gi,"");return e.length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),{r:B(e.substring(0,2)),g:B(e.substring(2,4)),b:B(e.substring(4,6))}}function D(r){var e=w(r,"origin",Object);return e.x=w(e,"x",Number),e.y=w(e,"y",Number),e}function H(r){r.width=document.documentElement.clientWidth,r.height=document.documentElement.clientHeight}function re(r){var e=r.getBoundingClientRect();r.width=e.width,r.height=e.height}function Q(r){var e=document.createElement("canvas");return e.style.position="fixed",e.style.top="0px",e.style.left="0px",e.style.pointerEvents="none",e.style.zIndex=r,e}function Y(r,e,n,s,h,v,p,i,g){r.save(),r.translate(e,n),r.rotate(v),r.scale(s,h),r.arc(0,0,1,p,i,g),r.restore()}function W(r){var e=r.angle*(Math.PI/180),n=r.spread*(Math.PI/180);return{x:r.x,y:r.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:r.startVelocity*.5+Math.random()*r.startVelocity,angle2D:-e+(.5*n-Math.random()*n),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:r.color,shape:r.shape,tick:0,totalTicks:r.ticks,decay:r.decay,drift:r.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:r.gravity*3,ovalScalar:.6,scalar:r.scalar,flat:r.flat}}function te(r,e){e.x+=Math.cos(e.angle2D)*e.velocity+e.drift,e.y+=Math.sin(e.angle2D)*e.velocity+e.gravity,e.velocity*=e.decay,e.flat?(e.wobble=0,e.wobbleX=e.x+10*e.scalar,e.wobbleY=e.y+10*e.scalar,e.tiltSin=0,e.tiltCos=0,e.random=1):(e.wobble+=e.wobbleSpeed,e.wobbleX=e.x+10*e.scalar*Math.cos(e.wobble),e.wobbleY=e.y+10*e.scalar*Math.sin(e.wobble),e.tiltAngle+=.1,e.tiltSin=Math.sin(e.tiltAngle),e.tiltCos=Math.cos(e.tiltAngle),e.random=Math.random()+2);var n=e.tick++/e.totalTicks,s=e.x+e.random*e.tiltCos,h=e.y+e.random*e.tiltSin,v=e.wobbleX+e.random*e.tiltCos,p=e.wobbleY+e.random*e.tiltSin;if(r.fillStyle="rgba("+e.color.r+", "+e.color.g+", "+e.color.b+", "+(1-n)+")",r.beginPath(),f&&e.shape.type==="path"&&typeof e.shape.path=="string"&&Array.isArray(e.shape.matrix))r.fill(ue(e.shape.path,e.shape.matrix,e.x,e.y,Math.abs(v-s)*.1,Math.abs(p-h)*.1,Math.PI/10*e.wobble));else if(e.shape.type==="bitmap"){var i=Math.PI/10*e.wobble,g=Math.abs(v-s)*.1,P=Math.abs(p-h)*.1,E=e.shape.bitmap.width*e.scalar,j=e.shape.bitmap.height*e.scalar,S=new DOMMatrix([Math.cos(i)*g,Math.sin(i)*g,-Math.sin(i)*P,Math.cos(i)*P,e.x,e.y]);S.multiplySelf(new DOMMatrix(e.shape.matrix));var F=r.createPattern(l.transform(e.shape.bitmap),"no-repeat");F.setTransform(S),r.globalAlpha=1-n,r.fillStyle=F,r.fillRect(e.x-E/2,e.y-j/2,E,j),r.globalAlpha=1}else if(e.shape==="circle")r.ellipse?r.ellipse(e.x,e.y,Math.abs(v-s)*e.ovalScalar,Math.abs(p-h)*e.ovalScalar,Math.PI/10*e.wobble,0,2*Math.PI):Y(r,e.x,e.y,Math.abs(v-s)*e.ovalScalar,Math.abs(p-h)*e.ovalScalar,Math.PI/10*e.wobble,0,2*Math.PI);else if(e.shape==="star")for(var b=Math.PI/2*3,A=4*e.scalar,$=8*e.scalar,G=e.x,U=e.y,ee=5,Z=Math.PI/ee;ee--;)G=e.x+Math.cos(b)*$,U=e.y+Math.sin(b)*$,r.lineTo(G,U),b+=Z,G=e.x+Math.cos(b)*A,U=e.y+Math.sin(b)*A,r.lineTo(G,U),b+=Z;else r.moveTo(Math.floor(e.x),Math.floor(e.y)),r.lineTo(Math.floor(e.wobbleX),Math.floor(h)),r.lineTo(Math.floor(v),Math.floor(p)),r.lineTo(Math.floor(s),Math.floor(e.wobbleY));return r.closePath(),r.fill(),e.tick<e.totalTicks}function ae(r,e,n,s,h){var v=e.slice(),p=r.getContext("2d"),i,g,P=u(function(E){function j(){i=g=null,p.clearRect(0,0,s.width,s.height),l.clear(),h(),E()}function S(){C&&!(s.width===k.width&&s.height===k.height)&&(s.width=r.width=k.width,s.height=r.height=k.height),!s.width&&!s.height&&(n(r),s.width=r.width,s.height=r.height),p.clearRect(0,0,s.width,s.height),v=v.filter(function(F){return te(p,F)}),v.length?i=t.frame(S):j()}i=t.frame(S),g=j});return{addFettis:function(E){return v=v.concat(E),P},canvas:r,promise:P,reset:function(){i&&t.cancel(i),g&&g()}}}function ne(r,e){var n=!r,s=!!w(e||{},"resize"),h=!1,v=w(e,"disableForReducedMotion",Boolean),p=O&&!!w(e||{},"useWorker"),i=p?a():null,g=n?H:re,P=r&&i?!!r.__confetti_initialized:!1,E=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,j;function S(b,A,$){for(var G=w(b,"particleCount",q),U=w(b,"angle",Number),ee=w(b,"spread",Number),Z=w(b,"startVelocity",Number),Se=w(b,"decay",Number),Ie=w(b,"gravity",Number),Re=w(b,"drift",Number),ge=w(b,"colors",_),Ne=w(b,"ticks",Number),ye=w(b,"shapes"),Fe=w(b,"scalar"),ke=!!w(b,"flat"),be=D(b),we=G,fe=[],De=r.width*be.x,Be=r.height*be.y;we--;)fe.push(W({x:De,y:Be,angle:U,spread:ee,startVelocity:Z,color:ge[we%ge.length],shape:ye[L(0,ye.length)],ticks:Ne,decay:Se,gravity:Ie,drift:Re,scalar:Fe,flat:ke}));return j?j.addFettis(fe):(j=ae(r,fe,g,A,$),j.promise)}function F(b){var A=v||w(b,"disableForReducedMotion",Boolean),$=w(b,"zIndex",Number);if(A&&E)return u(function(Z){Z()});n&&j?r=j.canvas:n&&!r&&(r=Q($),document.body.appendChild(r)),s&&!P&&g(r);var G={width:r.width,height:r.height};i&&!P&&i.init(r),P=!0,i&&(r.__confetti_initialized=!0);function U(){if(i){var Z={getBoundingClientRect:function(){if(!n)return r.getBoundingClientRect()}};g(Z),i.postMessage({resize:{width:Z.width,height:Z.height}});return}G.width=G.height=null}function ee(){j=null,s&&(h=!1,M.removeEventListener("resize",U)),n&&r&&(document.body.contains(r)&&document.body.removeChild(r),r=null,P=!1)}return s&&!h&&(h=!0,M.addEventListener("resize",U,!1)),i?i.fire(b,G,ee):S(b,G,ee)}return F.reset=function(){i&&i.reset(),j&&j.reset()},F}var oe;function le(){return oe||(oe=ne(null,{useWorker:!0,resize:!0})),oe}function ue(r,e,n,s,h,v,p){var i=new Path2D(r),g=new Path2D;g.addPath(i,new DOMMatrix(e));var P=new Path2D;return P.addPath(g,new DOMMatrix([Math.cos(p)*h,Math.sin(p)*h,-Math.sin(p)*v,Math.cos(p)*v,n,s])),P}function de(r){if(!f)throw new Error("path confetti are not supported in this browser");var e,n;typeof r=="string"?e=r:(e=r.path,n=r.matrix);var s=new Path2D(e),h=document.createElement("canvas"),v=h.getContext("2d");if(!n){for(var p=1e3,i=p,g=p,P=0,E=0,j,S,F=0;F<p;F+=2)for(var b=0;b<p;b+=2)v.isPointInPath(s,F,b,"nonzero")&&(i=Math.min(i,F),g=Math.min(g,b),P=Math.max(P,F),E=Math.max(E,b));j=P-i,S=E-g;var A=10,$=Math.min(A/j,A/S);n=[$,0,0,$,-Math.round(j/2+i)*$,-Math.round(S/2+g)*$]}return{type:"path",path:e,matrix:n}}function ie(r){var e,n=1,s="#000000",h='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof r=="string"?e=r:(e=r.text,n="scalar"in r?r.scalar:n,h="fontFamily"in r?r.fontFamily:h,s="color"in r?r.color:s);var v=10*n,p=""+v+"px "+h,i=new OffscreenCanvas(v,v),g=i.getContext("2d");g.font=p;var P=g.measureText(e),E=Math.ceil(P.actualBoundingBoxRight+P.actualBoundingBoxLeft),j=Math.ceil(P.actualBoundingBoxAscent+P.actualBoundingBoxDescent),S=2,F=P.actualBoundingBoxLeft+S,b=P.actualBoundingBoxAscent+S;E+=S+S,j+=S+S,i=new OffscreenCanvas(E,j),g=i.getContext("2d"),g.font=p,g.fillStyle=s,g.fillText(e,F,b);var A=1/n;return{type:"bitmap",bitmap:i.transferToImageBitmap(),matrix:[A,0,0,A,-E*A/2,-j*A/2]}}I.exports=function(){return le().apply(this,arguments)},I.exports.reset=function(){le().reset()},I.exports.create=ne,I.exports.shapeFromPath=de,I.exports.shapeFromText=ie})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),pe,!1);const Xe=pe.exports;var Ye=pe.exports.create;const er=Object.freeze(Object.defineProperty({__proto__:null,create:Ye,default:Xe},Symbol.toStringTag,{value:"Module"})),rr=Ae(er);var Oe;function tr(){if(Oe)return z;Oe=1;var T=z&&z.__assign||function(){return T=Object.assign||function(t){for(var a,o=1,c=arguments.length;o<c;o++){a=arguments[o];for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&(t[d]=a[d])}return t},T.apply(this,arguments)},M=z&&z.__createBinding||(Object.create?function(t,a,o,c){c===void 0&&(c=o);var d=Object.getOwnPropertyDescriptor(a,o);(!d||("get"in d?!a.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(t,c,d)}:function(t,a,o,c){c===void 0&&(c=o),t[c]=a[o]}),I=z&&z.__setModuleDefault||(Object.create?function(t,a){Object.defineProperty(t,"default",{enumerable:!0,value:a})}:function(t,a){t.default=a}),C=z&&z.__importStar||function(t){if(t&&t.__esModule)return t;var a={};if(t!=null)for(var o in t)o!=="default"&&Object.prototype.hasOwnProperty.call(t,o)&&M(a,t,o);return I(a,t),a},k=z&&z.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(z,"__esModule",{value:!0});var O=C(me()),f=k(rr),m={resize:!0,useWorker:!1},y={position:"fixed",pointerEvents:"none",width:"100%",height:"100%",top:0,left:0};function u(t,a){return!t&&!a?y:t}function l(t){var a=t.style,o=t.className,c=t.width,d=t.height,w=t.globalOptions,q=t.onInit,L=(0,O.useRef)(null),B=(0,O.useRef)(null);return(0,O.useEffect)(function(){if(L.current)return B.current=f.default.create(L.current,T(T({},m),w)),q==null||q({confetti:B.current}),function(){var _;(_=B.current)===null||_===void 0||_.reset()}},[]),O.default.createElement("canvas",{ref:L,style:u(a,o),className:o,width:c,height:d})}return z.default=l,z}var Ce;function ar(){if(Ce)return N;Ce=1;var T=N&&N.__assign||function(){return T=Object.assign||function(t){for(var a,o=1,c=arguments.length;o<c;o++){a=arguments[o];for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&(t[d]=a[d])}return t},T.apply(this,arguments)},M=N&&N.__createBinding||(Object.create?function(t,a,o,c){c===void 0&&(c=o);var d=Object.getOwnPropertyDescriptor(a,o);(!d||("get"in d?!a.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(t,c,d)}:function(t,a,o,c){c===void 0&&(c=o),t[c]=a[o]}),I=N&&N.__setModuleDefault||(Object.create?function(t,a){Object.defineProperty(t,"default",{enumerable:!0,value:a})}:function(t,a){t.default=a}),C=N&&N.__importStar||function(t){if(t&&t.__esModule)return t;var a={};if(t!=null)for(var o in t)o!=="default"&&Object.prototype.hasOwnProperty.call(t,o)&&M(a,t,o);return I(a,t),a},k=N&&N.__rest||function(t,a){var o={};for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&a.indexOf(c)<0&&(o[c]=t[c]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,c=Object.getOwnPropertySymbols(t);d<c.length;d++)a.indexOf(c[d])<0&&Object.prototype.propertyIsEnumerable.call(t,c[d])&&(o[c[d]]=t[c[d]]);return o},O=N&&N.__read||function(t,a){var o=typeof Symbol=="function"&&t[Symbol.iterator];if(!o)return t;var c=o.call(t),d,w=[],q;try{for(;(a===void 0||a-- >0)&&!(d=c.next()).done;)w.push(d.value)}catch(L){q={error:L}}finally{try{d&&!d.done&&(o=c.return)&&o.call(c)}finally{if(q)throw q.error}}return w},f=N&&N.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(N,"__esModule",{value:!0});var m=C(me()),y=f(tr()),u=function(t){return t};function l(t){var a=t.decorateOptions,o=a===void 0?u:a,c=t.Conductor,d=t.autorun,w=t.onInit,q=k(t,["decorateOptions","Conductor","autorun","onInit"]),L=O((0,m.useState)(),2),B=L[0],_=L[1],R=(0,m.useCallback)(function(D){var H=D.confetti;_(function(){return H})},[]);return(0,m.useEffect)(function(){if(B){var D=new c({confetti:B,decorateOptions:o});return d&&D.run(d),w==null||w({confetti:B,conductor:D}),D.stop}},[B]),m.default.createElement(y.default,T({onInit:R},q))}return N.default=l,N}var V={},se={},Pe;function nr(){if(Pe)return se;Pe=1,Object.defineProperty(se,"__esModule",{value:!0});var T=function(){function M(I){var C=I.confetti,k=I.decorateOptions,O=this;this.interval=null,this.shoot=function(){return O.tickAnimation()},this.run=function(f){var m=f.speed,y=f.delay,u=y===void 0?0:y,l=f.duration;O.interval||setTimeout(function(){O.shoot(),O.interval=setInterval(O.shoot,1e3/Math.min(m,1e3)),l&&setTimeout(O.pause,l)},u)},this.pause=function(){clearInterval(O.interval),O.interval=null},this.stop=function(){O.pause(),O.confetti.reset()},this.confetti=C,this.decorateOptions=k}return M}();return se.default=T,se}var ce={},je;function or(){if(je)return ce;je=1,Object.defineProperty(ce,"__esModule",{value:!0});function T(M,I){return Math.random()*(I-M)+M}return ce.default=T,ce}var Te;function ir(){if(Te)return V;Te=1;var T=V&&V.__extends||function(){var m=function(y,u){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,t){l.__proto__=t}||function(l,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(l[a]=t[a])},m(y,u)};return function(y,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");m(y,u);function l(){this.constructor=y}y.prototype=u===null?Object.create(u):(l.prototype=u.prototype,new l)}}(),M=V&&V.__read||function(m,y){var u=typeof Symbol=="function"&&m[Symbol.iterator];if(!u)return m;var l=u.call(m),t,a=[],o;try{for(;(y===void 0||y-- >0)&&!(t=l.next()).done;)a.push(t.value)}catch(c){o={error:c}}finally{try{t&&!t.done&&(u=l.return)&&u.call(l)}finally{if(o)throw o.error}}return a},I=V&&V.__spreadArray||function(m,y,u){if(u||arguments.length===2)for(var l=0,t=y.length,a;l<t;l++)(a||!(l in y))&&(a||(a=Array.prototype.slice.call(y,0,l)),a[l]=y[l]);return m.concat(a||Array.prototype.slice.call(y))},C=V&&V.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(V,"__esModule",{value:!0});var k=C(nr()),O=C(or()),f=function(m){T(y,m);function y(){var u=m.apply(this,I([],M(arguments),!1))||this;return u.tickAnimation=function(){u.confetti(u.decorateOptions({startVelocity:30,spread:360,ticks:60,zIndex:0,particleCount:150,origin:{x:(0,O.default)(.1,.3),y:Math.random()-.2}})),u.confetti(u.decorateOptions({startVelocity:30,spread:360,ticks:60,zIndex:0,particleCount:150,origin:{x:(0,O.default)(.7,.9),y:Math.random()-.2}}))},u}return y}(k.default);return V.default=f,V}var Ee;function lr(){if(Ee)return X;Ee=1;var T=X&&X.__assign||function(){return T=Object.assign||function(f){for(var m,y=1,u=arguments.length;y<u;y++){m=arguments[y];for(var l in m)Object.prototype.hasOwnProperty.call(m,l)&&(f[l]=m[l])}return f},T.apply(this,arguments)},M=X&&X.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(X,"__esModule",{value:!0});var I=M(me()),C=M(ar()),k=M(ir());function O(f){return I.default.createElement(C.default,T({Conductor:k.default},f))}return X.default=O,X}var sr=lr();const cr=ze(sr),ur="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='32'%20height='32'%20viewBox='0%200%2014%2014'%3e%3cpath%20fill='currentColor'%20fill-rule='evenodd'%20d='M0%207a7%207%200%201%201%2014%200A7%207%200%200%201%200%207m4.19%203.7a.625.625%200%201%201-1.207-.324a4.163%204.163%200%200%201%208.038%200a.625.625%200%200%201-1.207.325a2.913%202.913%200%200%200-5.624%200Zm.392-4.724a1.024%201.024%200%200%201%20.002-2.049h.003a1.024%201.024%200%200%201-.003%202.049zm4.831%200a1.024%201.024%200%200%201%20.003-2.049h.002a1.024%201.024%200%200%201-.002%202.049z'%20clip-rule='evenodd'%20/%3e%3c/svg%3e",dr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='32'%20height='32'%20viewBox='0%200%2014%2014'%3e%3cpath%20fill='currentColor'%20fill-rule='evenodd'%20d='M14%207A7%207%200%201%200%200%207a7%207%200%200%200%2014%200m-3.56-2.048c0%20.565-.457%201.023-1.022%201.024h-.002a1.025%201.025%200%200%201-.003-2.049h.003c.565%200%201.024.459%201.024%201.025m-4.831%200c0%20.565-.457%201.023-1.022%201.024h-.003a1.025%201.025%200%200%201-.002-2.049h.002c.566%200%201.025.459%201.025%201.025M4.189%207.76a.625.625%200%201%200-1.206.325a4.163%204.163%200%200%200%208.038%200a.625.625%200%201%200-1.207-.325a2.913%202.913%200%200%201-5.624%200Z'%20clip-rule='evenodd'%20/%3e%3c/svg%3e",fr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='32'%20height='32'%20viewBox='0%200%20512%20512'%3e%3cpath%20fill='currentColor'%20d='M0%20256a256%20256%200%201%201%20512%200a256%20256%200%201%201-512%200m407.4%2075.5c5-11.8-7-22.5-19.3-18.7c-39.7%2012.2-84.5%2019-131.8%2019s-92.1-6.8-131.8-19c-12.3-3.8-24.3%206.9-19.3%2018.7c25%2059.1%2083.2%20100.5%20151.1%20100.5s126.2-41.4%20151.1-100.5M160%20120c-3.1%200-5.9%201.8-7.2%204.6l-16.6%2034.7l-38.1%205c-3.1.4-5.6%202.5-6.6%205.5s-.1%206.2%202.1%208.3l27.9%2026.5l-7%2037.8c-.6%203%20.7%206.1%203.2%207.9s5.8%202%208.5.6l33.8-18.4l33.8%2018.3c2.7%201.5%206%201.3%208.5-.6s3.7-4.9%203.2-7.9l-7-37.8l27.9-26.5c2.2-2.1%203.1-5.3%202.1-8.3s-3.5-5.1-6.6-5.5l-38.1-5l-16.6-34.7c-1.3-2.8-4.1-4.6-7.2-4.6zm192%200c-3.1%200-5.9%201.8-7.2%204.6l-16.6%2034.7l-38.1%205c-3.1.4-5.6%202.5-6.6%205.5s-.1%206.2%202.1%208.3l27.9%2026.5l-7%2037.8c-.6%203%20.7%206.1%203.2%207.9s5.8%202%208.5.6l33.8-18.4l33.8%2018.3c2.7%201.5%206%201.3%208.5-.6s3.7-4.9%203.2-7.9l-7-37.8l27.9-26.5c2.2-2.1%203.1-5.3%202.1-8.3s-3.5-5.1-6.6-5.5l-38.1-5l-16.6-34.7c-1.3-2.8-4.1-4.6-7.2-4.6z'%20/%3e%3c/svg%3e",hr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='32'%20height='32'%20viewBox='0%200%2020%2020'%3e%3cpath%20fill='currentColor'%20fill-rule='evenodd'%20d='M18%2010a8%208%200%201%201-16%200a8%208%200%200%201%2016%200m-7-4a1%201%200%201%201-2%200a1%201%200%200%201%202%200M9%209a.75.75%200%200%200%200%201.5h.253a.25.25%200%200%201%20.244.304l-.459%202.066A1.75%201.75%200%200%200%2010.747%2015H11a.75.75%200%200%200%200-1.5h-.253a.25.25%200%200%201-.244-.304l.459-2.066A1.75%201.75%200%200%200%209.253%209z'%20clip-rule='evenodd'%20/%3e%3c/svg%3e",vr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='32'%20height='32'%20viewBox='0%200%20512%20512'%3e%3cpath%20fill='currentColor'%20d='M256%20512a256%20256%200%201%200%200-512a256%20256%200%201%200%200%20512m96-112h-8v-40h55.3c-3.8%2022.7-23.6%2040-47.3%2040m47.3-56H344v-40h8c23.8%200%2043.5%2017.3%2047.3%2040m-71.3%200h-64v-40h64zm0%2056h-64v-40h64zm-80-96v40h-64v-40zm0%2056v40h-64v-40zm-80-16h-55.3c3.8-22.7%2023.6-40%2047.3-40h8zm0%2056h-8c-23.8%200-43.5-17.3-47.3-40H168zm-23.6-192a32%2032%200%201%201%2064%200a32%2032%200%201%201-64%200m192-32a32%2032%200%201%201%200%2064a32%2032%200%201%201%200-64'%20/%3e%3c/svg%3e",mr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='32'%20height='32'%20viewBox='0%200%2014%2014'%3e%3cpath%20fill='currentColor'%20fill-rule='evenodd'%20d='M14%207A7%207%200%201%200%200%207a7%207%200%200%200%2014%200m-3.56-2.048c0%20.565-.457%201.023-1.022%201.024h-.002a1.025%201.025%200%200%201-.003-2.049h.003c.565%200%201.024.459%201.024%201.025m-4.831%200c0%20.565-.457%201.023-1.022%201.024h-.003a1.025%201.025%200%200%201-.002-2.049h.002c.566%200%201.025.459%201.025%201.025M9.452%208.7a.625.625%200%200%201%200%201.25H4.548a.625.625%200%200%201%200-1.25z'%20clip-rule='evenodd'%20/%3e%3c/svg%3e",Or=({id:T,ref:M,className:I})=>{const{myUser:C}=qe(),{isDarkThemed:k}=Le(),{isOnline:O}=Qe(),{examinationInformation:f,TerminateExamination:m,CheckMyAnswers:y}=We(),{data:u}=Ke(f==null?void 0:f.courseID,f==null?void 0:f.moduleID,f==null?void 0:f.lessonID,{usesSuspense:!0,transform:_=>_}),[l,t]=Me.useState(),a=Me.useMemo(()=>{if(l!=null)switch(l.rank){case"failed":return{modalClassName:"from-vibrant-red-normal",speed:.1,icon:ur,colours:["--color-vibrant-red-light","--color-vibrant-red-normal","--color-vibrant-red-dark"]};case"close":return{modalClassName:"from-vibrant-yellow-normal",speed:.5,icon:vr,colours:["--color-vibrant-yellow-light","--color-vibrant-yellow-normal","--color-vibrant-yellow-dark"]};case"passed":return{modalClassName:"from-vibrant-purple-normal",speed:1,icon:mr,colours:["--color-vibrant-purple-light","--color-vibrant-purple-normal","--color-vibrant-purple-dark"]};case"good":return{modalClassName:"from-vibrant-blue-normal",speed:2,icon:dr,colours:["--color-vibrant-blue-light","--color-vibrant-blue-normal","--color-vibrant-blue-dark"]};case"excellent":return{modalClassName:"from-vibrant-green-normal",speed:3,icon:fr,colours:["--color-vibrant-green-light","--color-vibrant-green-normal","--color-vibrant-green-dark"]}}},[l]);function o(_,R,D){const H=new Date(_).getTime(),re=new Date(R).getTime(),Q=Math.max(0,re-H),Y=Math.floor(Q/1e3/60);return`${Math.min(Y,D).toString().padStart(2,"0")}:00`}function c(_,R){const{totalPointsPossible:D,totalPointsGained:H}=_.reduce((Q,Y,W)=>{const te=Y.points,ae=(()=>{switch(u.questions[W].type){case xe.choose:return[u.questions[W].answer];case xe.select:return u.questions[W].answers}})(),ne=Array.isArray(R[W])?R[W]:[R[W]],oe=ne.filter(ie=>ae.includes(ie)).length,le=ne.filter(ie=>!ae.includes(ie)).length,ue=Math.max(0,(oe-le)/(ae.length||1)),de=te*ue;return{totalPointsPossible:Q.totalPointsPossible+te,totalPointsGained:Q.totalPointsGained+de}},{totalPointsPossible:0,totalPointsGained:0});return{points:Number(H.toFixed(2)),totalPointsPossible:D,totalPointsGained:H}}function d(_,R){const D=R>0?_/R*100:100;return Number(D.toFixed(2))}function w(_){return[{limit:20,rank:"failed"},{limit:40,rank:"close"},{limit:60,rank:"passed"},{limit:80,rank:"good"},{limit:1/0,rank:"excellent"}].find(R=>_<R.limit).rank}function q(_){const R=new Date(_["finishes-at"]),D=new Date(R.getTime()-u.time*60*1e3).toISOString(),H=o(D,_["finished-at"],u.time),{points:re,totalPointsPossible:Q,totalPointsGained:Y}=c(u.questions,_["chosen-answers"]),W=d(Y,Q),te=w(W);return{time:H,rank:te,grade:`${W}%`,points:`${Math.ceil(re)} XP`}}function L(){return x.jsxs(x.Fragment,{children:[x.jsxs(he,{gap:"4",children:[x.jsx(_e,{source:hr}),x.jsx(J,{className:"text-lg font-bold",variant:"h1",gender:(C==null?void 0:C.gender)??"male",children:K.lessons.examination.modals["result-suspense"].title})]}),x.jsx(J,{className:"max-w-[16rem]",variant:"p",gender:(C==null?void 0:C.gender)??"male",children:K.lessons.examination.modals["result-suspense"].paragraph}),x.jsx(ve,{className:"w-full",onClick:_=>t(q(f)),children:x.jsx(J,{children:K.lessons.examination.modals["result-suspense"].buttons["show-results"]})})]})}function B(){return x.jsxs(x.Fragment,{children:[Ze.createPortal(x.jsx(cr,{className:"pointer-events-none fixed inset-0 z-[100000] h-screen w-screen",autorun:{speed:a.speed},decorateOptions:_=>({colors:a.colours.map(R=>document.body.computedStyleMap().get(R).toString()),..._})}),document.body),x.jsx(_e,{className:"aspect-square w-[128px] place-self-center [&>svg]:h-full [&>svg]:w-full",source:a.icon}),x.jsx(J,{className:"text-lg font-bold",variant:"h1",gender:(C==null?void 0:C.gender)??"male",children:K.lessons.examination.modals["result-display"].title[l.rank]}),x.jsx(J,{className:"max-w-[16rem]",variant:"p",gender:(C==null?void 0:C.gender)??"male",children:K.lessons.examination.modals["result-display"].paragraph[l.rank]}),x.jsxs(he,{className:"bg-background-light -m-8 -mt-4 p-8",gap:"8",direction:"column",children:[x.jsx("div",{className:"columns-3 gap-4",children:["time","points","grade"].map((_,R)=>x.jsxs(he,{className:Ge("border-3 overflow-hidden rounded-2xl",["bg-secondary-normal border-secondary-normal [&>div]:bg-secondary-light [&>div]:text-secondary-normal",k?"bg-tertiary-light border-tertiary-light [&>div]:text-tertiary-light [&>div]:bg-white/75":"bg-tertiary-normal border-tertiary-normal [&>div]:bg-tertiary-light [&>div]:text-tertiary-normal","bg-primary-normal border-primary-normal [&>div]:bg-primary-light [&>div]:text-primary-normal"][R]),direction:"column",children:[x.jsx("div",{className:"p-4",children:x.jsx(He,{className:"text-center font-bold max-sm:scale-125 max-sm:text-sm",dir:"ltr",variant:"p",children:l[_]})}),x.jsx(J,{className:"px-4 py-1 text-center font-bold text-white",variant:"h4",children:K.lessons.examination.modals["result-display"].information[_]})]},R))}),x.jsxs(Je,{className:"w-full",children:[x.jsx(ve,{className:"flex-[0.4]",onClick:_=>m(),children:x.jsx(J,{children:K.lessons.examination.modals["result-display"].buttons.exit})}),x.jsx(ve,{className:"flex-1",variant:"primary",onClick:_=>y(),children:x.jsx(J,{children:K.lessons.examination.modals["result-display"].buttons["check-my-answers"]})})]})]})]})}return x.jsx(Ue,{id:T,ref:M,className:Ve("bg-background-light gap-4 overflow-hidden max-sm:w-[90vw]",l!=null&&"to-background-light bg-gradient-to-b to-50%",l!=null&&a.modalClassName,I),hasCloseButton:l!=null,closeButtonProps:l!=null?{isSquare:!0}:{},setIsOpen:()=>l!=null&&m(),isOpen:((f==null?void 0:f.finalized)??!1)&&!((f==null?void 0:f["check-my-answers"])??!1)&&($e.ENVIRONMENT=="development"||O),children:l==null?x.jsx(L,{}):x.jsx(B,{})})};export{Or as E};
